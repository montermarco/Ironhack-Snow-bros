
var platforms = [ ];

/* -----PLATFORMS LEVEL ONE-----*/ 

// line 1
platforms.push({
  level: "one",
  plat: 1,
  x: 115,
  y: 190,
  width: 115,
  height: 3
})
// line 2  
 platforms.push({
    level: "one",
    plat: 2,
    x:230,
    y:145,
    height: 45,
    width: 1 
});
 // line 3
 platforms.push({
    level: "one",
    plat: 3,
    x:230,
    y:145,
    width:440,
    height: 1 
});
 // line 4
 platforms.push({
    level: "one",
    plat: 4,
    x:670,
    y:145,
    height:45,
    width: 1 
});
 // line 5
 platforms.push({
    level: "one",
    plat: 5,
    x:675,
    y:190,
    width:110,
    height: 1
});
// line 6
platforms.push({
    level: "one",
    plat: 6,
    x:0,
    y:285,
    width:375,
    height: 1 
});
 // line 7
 platforms.push({
    level: "one",
    plat: 7,
    x:505,
    y:285,
    width:395,
    height: 1 
});
 // line 8
 platforms.push({
    level: "one",
    plat: 8,
    x:165,
    y:378,
    width:565,
    height: 1 
});
 // line 9 
 platforms.push({
    level: "one",
    plat: 9,
    x:0,
    y:470,
    width:226,
    height: 1 
});
 // line 10
 platforms.push({
    level: "one",
    plat: 10,
    x:335,
    y:470,
    width:227,
    height: 1 
});
 // line 11
 platforms.push({
    level: "one",
    plat: 11,
    x:672,
    y:470,
    width:228,
    height: 1 
});
 // line 12 floor
 platforms.push({
    level: "one",
    plat: 12,
    x:0,
    y:565,
    width:900,
    height: 1
});


/* -----PLATFORMS LEVEL TWO -----*/ 

// line 1
platforms.push({
    level: "two",
    plat: 1,
    x:172,
    y:95,
    width:388,
    height: 1 
});
 // line 2 
 platforms.push({
    level: "two",
    plat: 2,
    x:673,
    y:95,
    height: 1,
    width: 114 
});
 // line 3
 platforms.push({
    level: "two",
    plat: 3,
    x:673,
    y:95,
    width:1,
    height: 87 
});
 // line 4 
 platforms.push({
    level: "two",
    plat: 4,
    x:342,
    y:188,
    height:1,
    width: 331 
});
 // line 5 ___
 platforms.push({
    level: "two",
    plat: 5,
    x:112,
    y:188,
    width:114,
    height: 1
});
// line 6
platforms.push({
    level: "two",
    plat: 6,
    x:226,
    y:188,
    width:1,
    height: 87
});
 // line 7
 platforms.push({
    level: "two",
    plat: 7,
    x:226,
    y:280,
    width:334,
    height: 1 
});
 // line 8
 platforms.push({
    level: "two",
    plat: 8,
    x:673,
    y:280,
    width:114,
    height: 1 
});
 // line 9
 platforms.push({
    level: "two",
    plat: 9,
    x:673,
    y:290,
    width:1,
    height: 87 
});
 // line 10
 platforms.push({
    level: "two",
    plat: 10,
    x:342,
    y:373,
    width:331,
    height: 1 
});
 // line 11
 platforms.push({
    level: "two",
    plat: 11,
    x:112,
    y:373,
    width:114,
    height: 1 
});
 // line 12
 platforms.push({
    level: "two",
    plat: 12,
    x:226,
    y:373,
    width:1,
    height: 87
});
 // line 13
 platforms.push({
    level: "two",
    plat: 13,
    x:226,
    y:465,
    width:500,
    height: 1
});
 // line 14 Floor
 platforms.push({
    level: "two",
    plat: 14,
    x:0,
    y:560,
    width:900,
    height: 1
});

/* -----PLATFORMS LEVEL THREE -----*/ 

// line 1
platforms.push({
    level: "three",
    plat: 1,
    x:170,
    y:95,
    width:555,
    height: 1 
});
 // line 2 
 platforms.push({
    level: "three",
    plat: 2,
    x:0,
    y:190,
    width: 113,
    height: 1 
});
 // line 3
 platforms.push({
    level: "three",
    plat: 3,
    x:222,
    y:190,
    width:452,
    height: 1 
});
 // line 4 
 platforms.push({
    level: "three",
    plat: 4,
    x:789,
    y:190,
    width:111,
    height:1
     
});
 // line 5 ___
 platforms.push({
    level: "three",
    plat: 5,
    x:0,
    y:285,
    width:60,
    height: 1
});
// line 6
platforms.push({
    level: "three",
    plat: 6,
    x:170,
    y:285,
    width:114,
    height: 1
});
 // line 7
 platforms.push({
    level: "three",
    plat: 7,
    x:394,
    y:285,
    width:112,
    height: 1 
});
 // line 8
 platforms.push({
    level: "three",
    plat: 8,
    x:619,
    y:285,
    width:111,
    height: 1 
});
 // line 9
 platforms.push({
    level: "three",
    plat: 9,
    x:844,
    y:285,
    width:56,
    height: 1 
});
 // line 10
 platforms.push({
    level: "three",
    plat: 10,
    x:0,
    y:375,
    width:60,
    height: 1 
});
 // line 11
 platforms.push({
    level: "three",
    plat: 11,
    x:394,
    y:375,
    width:112,
    height: 1 
});
 // line 12
 platforms.push({
    level: "three",
    plat: 12,
    x:844,
    y:375,
    width:56,
    height: 1
});
 // line 13
 platforms.push({
    level: "three",
    plat: 13,
    x:0,
    y:470,
    width:170,
    height: 1
});
 // line 14
 platforms.push({
    level: "three",
    plat: 14,
    x:284,
    y:470,
    width:335,
    height: 1
});
 // line 15
 platforms.push({
    level: "three",
    plat: 15,
    x:730,
    y:470,
    width:170,
    height: 1
});
 // line 16
 platforms.push({
    level: "three",
    plat: 16,
    x:0,
    y:565,
    width:900,
    height: 1
});


/* -----PLATFORMS LEVEL FOUR -----*/ 

// line 1
platforms.push({
    level: "four",
    plat: 1,
    x:0,
    y:190,
    width:390,
    height: 1 
});
 // line 2 
 platforms.push({
    level: "four",
    plat: 2, 
    x:170,
    y:285,
    width:330,
    height: 1 
});
 // line 3
 platforms.push({
    level: "four",
    plat: 3,
    x:0,
    y:375,
    width:390,
    height: 1 
});
 // line 4 
 platforms.push({
    level: "four",
    plat: 4,
    x:170,
    y:467,
    width:330,
    height:1
     
});
 // line 5 
 platforms.push({
    level: "four",
    plat: 5,
    x:620,
    y:330,
    width:280,
    height: 1
});
// line 6 
platforms.push({
    level: "four",
    plat: 6,
    x:0,
    y:560,
    width:900,
    height: 1
});

//Creating levels 

var levelOne = platforms.filter(platform => platform.level == "one");
var levelTwo = platforms.filter(platform => platform.level == "two");
var levelThree = platforms.filter(platform => platform.level == "three");
var levelFour = platforms.filter(platform => platform.level == "four");

// Drawing thelevels -  The wanted level must be passed as the function argument   

function drawLevel(array){
  c.fillStyle = "red";
  array.forEach(arr =>{
    c.fillRect(arr.x, arr.y, arr.width, 3)
  });
}

drawLevel(levelTwo); // 

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 

// how to draw the levels? 

Boardgame.prototype.levelBkgd = function(level){
    
    switch(level){
        case levelOne:
        Boardgame.bkgd.src = 'https://i.ibb.co/tPR1r17/SB-Level-1.jpg';
        break;
        case levelTwo:
        Boardgame.bkgd.src = 'https://i.ibb.co/zVwt6hF/SB-Level-2.jpg';
        break;
        case levelThree:
        Boardgame.bkgd.src = 'https://i.ibb.co/m5kPX7B/SB-Level-3.jpg';
        break;
        case levelFour:
        Boardgame.bkgd.src = 'https://i.ibb.co/K65GTKm/SB-Level-4-Final.jpg';
        break;       
      }              
}

////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////// SPRITES IMAGES
////////////////////////////////////////////////////////////////////////////////

var sprites = [];

sprites.push({
    action: "walking right",
    x:0,
    y:0,
    width: 325,
    height: 80,
    spriteCols:5,
    spriteRows:1,
    height: 1,
    walkingRight = new Image(),
    walkingRight.src = "./img/Snow_bro/walk_&_run/snowbro_walk_right.png",

});

yacargo = function(){
    
}

/* -----PLAYER WALK AND RUN-----*/ 

var walkingRight = new Image();
walkingRight.src = "./img/Snow_bro/walk_&_run/snowbro_walk_right.png";
walkingRight.addEventListener("load", yacargo)

var walkingLeft = new Image;
walkingLeft.src = "./img/Snow_bro/walk_&_run/snowbro_walk_left.png";

var runningRight = new Image;
runningRight.src = "./img/Snow_bro/walk_&_run/snowbro_run_right.png";

var runningLeft = new Image;
runningLeft.src = "./img/Snow_bro/walk_&_run/snowbro_run_left.png";

/* -----PLAYER JUMP -----*/ 

var jumpingRight = new Image;
jumpingRight.src = "./img/Snow_bro/jump/snowbro_jump_right.png.png";

var jumpingLeft = new Image;
jumpingLeft.src = "./img/Snow_bro/jump/snowbro_jump_left.png";

/* -----PLAYER SHOOTING -----*/ 

var walkingShootR = new Image;
walkingShootR.src = "./img/Snow_bro/shoot/snowbro_walkshooting_right.png";

var walkingShootL = new Image;
walkingShootL.src = "./img/Snow_bro/shoot/snowbro_walkshooting_left.png";

var runningShootR = new Image;
runningShootR.src = "./img/Snow_bro/shoot/snowbro_runshooting_right.png";

var runningShootL = new Image;
runningShootL.src = "./img/Snow_bro/shoot/snowbro_runshooting_left.png";

/* -----PLAYER  PUSHING -----*/ 

var walkingPushR = new Image;
walkingPushR = "./img/Snow_bro/push/snowbro_walk_push_right.png";

var walkingPushL = new Image;
walkingPushL.src = "./img/Snow_bro/push/snowbro_walk_push_left.png";

var runningPushR = new Image;
runningPushR.src = "./img/Snow_bro/push/snowbro_run_push_right.png";

var runningPushL = new Image;
runningPushL.src = "./img/Snow_bro/push/snowbro_run_push_right.png";

/* -----PLAYER  KICKING -----*/

var kickRight = new Image;
kickRight.src = "./img/Snow_bro/kick/snowbro_kick_right.png";

var kickLeft = new Image;
kickLeft.src = "./img/Snow_bro/kick/snowbro_kick_left.png";

/* -----PLAYER  DIEYING -----*/

var touched = new Image;
touched.src = "./img/Snow_bro/die/snowbro_die_touched.png";

var gone = new Image;
gone.src = "./img/Snow_bro/die/snowbro_die_gone.png";

/* ----- BULLETS -----*/

var bulletOneRight = new Image;
bulletOneRight.src = "./img/Snow_bro/bullets/bulletone_right.png";

var bulletOneLeft = new Image;
bulletOneLeft.src = "./img/Snow_bro/bullets/bulletone_left.png";

var bulletTwoRight = new Image;
bulletTwoRight.src = "./img/Snow_bro/bullets/bulletTwo_right.png";

var bulletTwoLeft = new Image;
bulletTwoLeft.src = "./img/Snow_bro/bullets/bulletTwo_left.png";

var bulletImpactR = new Image;
bulletImpactR.src = "./img/Snow_bro/bullets/bullet_explotion_right.png";

var bulletImpactL = new Image;
bulletImpactL.src = "./img/Snow_bro/bullets/bullet_explotion_left.png";

/* ----- GAME IMAGES -----*/

// Posions

var 
var posionRed = new Image;
posionRed.src = "./img/Snow_bro/game/green_posion.png";

var posionBlue = new Image;
posionBlue.src = "./img/Snow_bro/game/green_posion.png";

var posionGreen = new Image;
posionGreen.src = "./img/Snow_bro/game/green_posion.png";

//  Snowballs

var turnIntoBall = new Image;
turnIntoBall.src = "./img/Snow_bro/game/make_snowball.png";

var snowBolling = new Image;
snowBolling.src = "./img/Snow_bro/game/snowball_white.png";

// Player entrance

var playerDust = new Image;
playerDust.src = "./img/Snow_bro/game/snowbro_appear_dust.png";

var playerEntrance = new Image;
playerEntrance.src = "./img/Snow_bro/game/snowbro_appear_explotion.png";






//arreglos de imagen
//tipos de imagenes por frames


function createBullet(){
  let bullet = new Bullet();
  bullets.push(bullet);
}



function startMode (){
    if(player.mode == "start mode"){
       player.xs += 0.5;

    }
}




function drawBullet() { 
    if(player.mode == "start mode"){
        if(player.isWalkingTo == "right"){
            bullets.forEach(bullet =>{
                bullet.x += bullet.xs;
                bullet.y += bullet.ys;
                bullet.ys += bullet.gravity;
                bullet.draw();
              })   
        } else if (player.isWalkingTo == "left") {
            bullets.forEach(bullet =>{
                bullet.x -= bullet.xs;
                bullet.y += bullet.ys;
                bullet.ys += bullet.gravity;
                bullet.draw();
              })
        }
    }
    }
  
//betewwn lines 55 & 70 of player class

    switch(this.accion){
        case 1:
        //jumping
        //this.img.src = "./img/Snow_bro/walk_and_run/snowbro_walk_right2.png";  
        if(keys[39]===true)
          this.curFrame++;
          if(this.curFrame == this.sprCols){
            this.curFrame = -1
          }
          
        console.log(this.y, this.x, this.width, this.height)
          break;
        case 2:
          this.img.src = "./img/Snow_bro/walk_and_run/snowbro_walk_left.png";
          break;
      }


function playerMovement(){
    //jump
    if(keys[32]){
        keys[32]=false;
        if(!player.jumping){
          player.ys = player.jumpStrength;
          player.jumping = true;
        }
        
      }
      ///////////////////////////////////////////////////////////////////////////////////////////////////////MOVE RIGHT
      if(keys[39]){
        if(player.x  + player.width > c.canvas.width){ player.xs = 0} else { player.xs += 0.5; }
          player.isWalkingTo = "right";
          player.accion = 1;
      }
      ///////////////////////////////////////////////////////////////////////////////////////////////////////MOVE LEFT
      if(keys[37]){
        if(player.x < 0){ player.xs = 0} else { player.xs -= 0.5;}
         player.accion = 1;
         player.isWalkingTo = "left";  
      }
     
    
      ///////////////////////////////////////////////////////////////////////////////////////////////////////SHOOTING
      if(keys[83]){
        keys[83]=false;
        createBullet();  
      }
        
      //jumping
      player.y += player.ys;
      player.ys += gravity;
    
      //lateral movement
      player.x += player.xs;
      player.xs *= friction;
    
      //collition
      player.grounded = false;
    
};


 function isTouching (char, plat){
    return (char.x < plat.x + plat.width) &&
            (char.x + char.width  > plat.x) &&
            (char.y < plat.y + plat.height) &&
            (char.y + char.height > plat.y)  
 }   

function collitionCheck(){ 
    platforms.forEach(platform => {
        if(isTouching(player, platform)){
            player.y = platform.y - player.height;
            player.grounded = true;
        }
    });
 }


//  original motion

 function motion(){
    
 
    platforms.forEach(platform=>{
      var direction = collisionCheck(player, platform);
      if(direction == "left" || direction == "right"){
        player.xs = 0;
      }else if(direction == "bottom"){
        player.jumping = false;
        player.grounded = true;
      }     
      // else if(direction == "top"){
      //   player.velY += 1;
      // }
    });
    
    if(player.grounded){
      player.ys = 0;
    }
    
  } 
  
  
  function collisionCheck(char, plat){
  
    // this is how the player would appear, if removing widht/2 the player appears in the middle of the lines
    
    var vectorX = (char.x + (char.width/2)) - (plat.x + (plat.width/2));
    var vectorY = (char.y + (char.height/2)) - (plat.y + (plat.height/2));
    
    var halfWidths = (char.width/2) + (plat.width/2);
    var halfHeights = (char.height/2) + (plat.height/2);
    
    var collisionDirection = null;
    
    //Offset  - the amount or distance the which player is out of line.
    //Vector - determining the position of one point in space relative to another.
  
    if(Math.abs(vectorX) < halfWidths && Math.abs(vectorY) < halfHeights){
      var offsetX = halfWidths - Math.abs(vectorX); 
      var offsetY = halfHeights - Math.abs(vectorY);
      if(offsetX < offsetY){
        if(vectorX > 0){
          collisionDirection = "left";
          char.x += offsetX;
        }else{
          collisionDirection = "right";
          char.x -= offsetX;
        }
      }else{
        if(vectorY > 0){
          collisionDirection = "top"
          //char.y += offsetY;
        }
          collisionDirection = "bottom";
          char.y -= offsetY;
        }
    }
   return collisionDirection;
    
  }

//this goes between line 55 and 70 of player classs 
  switch(this.action){
    case 1:
    //jumping
    //this.img.src = "./img/Snow_bro/walk_and_run/snowbro_walk_right2.png";  
    if(keys[39])
      this.curFrame++;
      if(this.curFrame == this.sprCols){
        this.curFrame = -1
      }
      
    console.log(this.y, this.x, this.width, this.height)
      break;
    case 2:
      this.img.src = "./img/Snow_bro/walk_and_run/snowbro_walk_left.png";
      break;
  } 



// moving functions from player


this.jump = () => {
        if(!this.jumping){
          this.ys = this.jumpStrength;
          this.y += this.ys;
          this.jumping = true;
        }
        this.isWalkingTo = "up"
      } 

      this.right = () => {
        this.isWalkingTo ="right"
        if(this.x + this.width > c.canvas.width){
          this.xs = 0;
        } else {
          player.xs += 1;
        }
      }

      this.left = () => {
        this.isWalkingTo = "left"
        if(this.x < 0){ 
          this.x = 0;
        } else {
          this.xs -= 1;
        }
      }

function playerMovement(){
  //jump
  if(keys[32]){
      keys[32]=false;
      player.jump();
    }
    ///////////////////////////////////////////////////////MOVE RIGHT
    if(keys[39]){
      keys[39] = false;
        player.right();
        player.accion = 1;
    }
    /////////////////////////////////////////////////////MOVE LEFT
    if(keys[37]){
      keys[37] = false;
       player.left();
       player.accion = 1;
         
    }
    /////////////////////////////////////////////////SHOOTING
    if(keys[83]){
      keys[83]=false;
      createBullet();  
    }
      
    //jumping
    player.y += player.ys;
    player.ys += gravity;
    //lateral movement
    player.x += player.xs;
    player.xs *= friction;
  
    //collition
    player.grounded = false;
  
};



function isTouching (char, plat){
  return (char.x < plat.x + plat.width) && //player bottom x / plat 
          (char.x + char.width  > plat.x) &&
          (char.y < plat.y + plat.height) &&
          (char.y + char.height > plat.y)  
}   



platforms.forEach(platform=>{
    var direction = collisionCheck(char, platf);
    if(char.x < plat.x + plat.widht)
})



platforms.forEach(platform=>{
    var direction = collisionCheck(player, platform);
    if(direction == "left" || direction == "right"){
      player.xs = 0;
    }else if(direction == "bottom"){
      player.jumping = false;
      player.grounded = true;
    }     
    // else if(direction == "top"){
    //   player.velY += 1;
    // }
  });
  
  if(player.grounded){
    player.ys = 0;
  }
     

      if(vectorX > 0){
        collisionDirection = "left";
        char.x += offsetX;
      }else{
        collisionDirection = "right";
        char.x -= offsetX;
      }
    }else{
      if(vectorY > 0){
        collisionDirection = "top"
        //char.y += offsetY;
      }
        collisionDirection = "bottom";
        char.y -= offsetY;
      }
  }
  return collisionDirection;
  
}

















  ///////////////////////////////////* -----PLATFORMS LEVEL TWO -----*/ 
  
  // line 1
  platforms.push({
      level: "two",
      plat: 1,
      x:172,
      y:95,
      width:388,
      height: 1 
  });
   // line 2 
   platforms.push({
      level: "two",
      plat: 2,
      x:673,
      y:95,
      height: 1,
      width: 114 
  });
   // line 3
   platforms.push({
      level: "two",
      plat: 3,
      x:673,
      y:95,
      width:1,
      height: 87 
  });
   // line 4 
   platforms.push({
      level: "two",
      plat: 4,
      x:342,
      y:188,
      height:1,
      width: 331 
  });
   // line 5 ___
   platforms.push({
      level: "two",
      plat: 5,
      x:112,
      y:188,
      width:114,
      height: 1
  });
  // line 6
  platforms.push({
      level: "two",
      plat: 6,
      x:226,
      y:188,
      width:1,
      height: 87
  });
   // line 7
   platforms.push({
      level: "two",
      plat: 7,
      x:226,
      y:280,
      width:334,
      height: 1 
  });
   // line 8
   platforms.push({
      level: "two",
      plat: 8,
      x:673,
      y:280,
      width:114,
      height: 1 
  });
   // line 9
   platforms.push({
      level: "two",
      plat: 9,
      x:673,
      y:290,
      width:1,
      height: 87 
  });
   // line 10
   platforms.push({
      level: "two",
      plat: 10,
      x:342,
      y:373,
      width:331,
      height: 1 
  });
   // line 11
   platforms.push({
      level: "two",
      plat: 11,
      x:112,
      y:373,
      width:114,
      height: 1 
  });
   // line 12
   platforms.push({
      level: "two",
      plat: 12,
      x:226,
      y:373,
      width:1,
      height: 87
  });
   // line 13
   platforms.push({
      level: "two",
      plat: 13,
      x:226,
      y:465,
      width:500,
      height: 1
  });
   // line 14 Floor
   platforms.push({
      level: "two",
      plat: 14,
      x:0,
      y:560,
      width:900,
      height: 1
  });
  
 ////////////////////////////////// /* -----PLATFORMS LEVEL THREE -----*/ 
  
  // line 1
  platforms.push({
      level: "three",
      plat: 1,
      x:170,
      y:95,
      width:555,
      height: 1 
  });
   // line 2 
   platforms.push({
      level: "three",
      plat: 2,
      x:0,
      y:190,
      width: 113,
      height: 1 
  });
   // line 3
   platforms.push({
      level: "three",
      plat: 3,
      x:222,
      y:190,
      width:452,
      height: 1 
  });
   // line 4 
   platforms.push({
      level: "three",
      plat: 4,
      x:789,
      y:190,
      width:111,
      height:1
       
  });
   // line 5 ___
   platforms.push({
      level: "three",
      plat: 5,
      x:0,
      y:285,
      width:60,
      height: 1
  });
  // line 6
  platforms.push({
      level: "three",
      plat: 6,
      x:170,
      y:285,
      width:114,
      height: 1
  });
   // line 7
   platforms.push({
      level: "three",
      plat: 7,
      x:394,
      y:285,
      width:112,
      height: 1 
  });
   // line 8
   platforms.push({
      level: "three",
      plat: 8,
      x:619,
      y:285,
      width:111,
      height: 1 
  });
   // line 9
   platforms.push({
      level: "three",
      plat: 9,
      x:844,
      y:285,
      width:56,
      height: 1 
  });
   // line 10
   platforms.push({
      level: "three",
      plat: 10,
      x:0,
      y:375,
      width:60,
      height: 1 
  });
   // line 11
   platforms.push({
      level: "three",
      plat: 11,
      x:394,
      y:375,
      width:112,
      height: 1 
  });
   // line 12
   platforms.push({
      level: "three",
      plat: 12,
      x:844,
      y:375,
      width:56,
      height: 1
  });
   // line 13
   platforms.push({
      level: "three",
      plat: 13,
      x:0,
      y:470,
      width:170,
      height: 1
  });
   // line 14
   platforms.push({
      level: "three",
      plat: 14,
      x:284,
      y:470,
      width:335,
      height: 1
  });
   // line 15
   platforms.push({
      level: "three",
      plat: 15,
      x:730,
      y:470,
      width:170,
      height: 1
  });
   // line 16
   platforms.push({
      level: "three",
      plat: 16,
      x:0,
      y:565,
      width:900,
      height: 1
  });
  
 ///////////////////////////////////* -----PLATFORMS LEVEL FOUR -----*/ 
  
  // line 1
  platforms.push({
      level: "four",
      plat: 1,
      x:0,
      y:190,
      width:390,
      height: 1 
  });
   // line 2 
   platforms.push({
      level: "four",
      plat: 2, 
      x:170,
      y:285,
      width:330,
      height: 1 
  });
   // line 3
   platforms.push({
      level: "four",
      plat: 3,
      x:0,
      y:375,
      width:390,
      height: 1 
  });
   // line 4 
   platforms.push({
      level: "four",
      plat: 4,
      x:170,
      y:467,
      width:330,
      height:1
       
  });
   // line 5 
   platforms.push({
      level: "four",
      plat: 5,
      x:620,
      y:330,
      width:280,
      height: 1
  });
  // line 6 
  platforms.push({
      level: "four",
      plat: 6,
      x:0,
      y:560,
      width:900,
      height: 1
  });
  

 // this.position = function(){
  //   console.log(this.number)
  //   switch(this.number){
  //     case 1:
  //       this.x = 25;
  //       this.y = 200;
  //   }
  // }


  function drawEnemie(){
    enemies.forEach(enemie=>{
      if(enemie.y == enemie.yFinal){
        enemie.draw()
      }else
        enemie.drawInicial();
  });
  }
  
  function clearCanvas(){
      c.clearRect(0, 0, 900, 600);
  }
  


 
      //   if(keys[83]){
      //     this.curFrame++;}
      //   if(this.curFrame == this.sprCols){
      //     this.curFrame = -1
      //   }  
      // break;

      // case "left":
      // this.img.src = "./img/Snow_bro/bullets/bulletone_left2.png"
      // if(keys[83]){
      // this.curFrame++;
      // } if(this.curFrame == this.sprCols){
      //   this.curFrame = -1
      // }
      // break;
      // } 
      //   console.log("La baaaala", this.x, this.y)
      //   c.drawImage(this.img, 0+(this.spriteWidth/2*this.curFrame), 0, 42, 42, this.x, this.y, this.width, this.height);



function para mover enmigo
function generar enemigos aleatorio


every / seconds new enemir
level = dificulty


indice map
para borrarlo lo saco del arreglo que l pinta
si este we tpca a este we

eneie indice map

bullet.map   
ss enemiei stouchin bala = 



function enemieMovement() { 
   
    if(enemie.x + enemie.width > c.canvas.width){
      enemie.xs --;
    } else { enemie.xs ++}  
    
    if (enemie.x < 0){enemie.x = ++} else {enemie.x --} 
    
      //jumping
      enemie.y += enemie.ys;
      enemie.ys += gravity;
  
      //lateral movement
      enemie.x += enemie.xs;
      enemie.xs *= friction;
      
      //collition
      enemie.grounded = false;
      
        platforms.forEach(platform=>{
        var direction = collisionCheck(enemie, platform);
        if(direction == "bottom"){
          enemie.grounded = true;
        }     
      });
  
      if(ememie.grounded){
        enemie.ys = 0;
      }
  }
  
    



  function Wizzard(){
    this.x = Math.random() * c.canvas.width
    this.y = null
    this.yFinal = landing[ri]
    this.xs = 0,
    this.ys = 0,
    this.width = 20,
    this.height = 20,
    this.gravity = 0.9,
    this.grounded = false
    
    this.drawInicial = function(){
      //if(this.y == this.yFinal) return;
      this.y++;
      // if(this.y){
      //   this.ys ++;
      // };
      c.fillStyle = "blue";
      c.fillRect(this.x, this.y, 30, 30);
      }  
  
    this.draw = function(){
      
      c.fillStyle = "green";
      c.fillRect(this.x, this.y, 30, 30);
      }  
  
     this.isTouching = function (platform) {
        return  (this.x < platform.x + platform.width)  &&
                (this.x + this.width > platform.x)  &&
                (this.y < platform.y + platform.height) &&
                (this.y + this.height > platform.y)
     }
  
  }

  function createWizzard(){
    if(!(frames % 300 === 0)) return
    for(i=0;i<7; i++){
        let wizz = new Wizzard();
        enemiwe.createMonster();
        enemies.push(wizz);
    }
  }

//////////////////replacement
// line 211 of helpers

function Wizzard(){
    this.x = Math.random() * c.canvas.width
    this.y = 0
    this.yFinal = landing[ri]
    this.xs = 0,
    this.ys = 0,
    this.width = 20,
    this.height = 20,
    this.grounded = false
    this.jumping = false
    this.jumpStrength = -15
      
    
    this.drawInicial = function(){
      //if(this.y == this.yFinal) return;
      this.y++;
      // if(this.y){
      //   this.ys ++;
      // };
      c.fillStyle = "blue";
      c.fillRect(this.x, this.y, 30, 30);
      }  
  
    this.draw = function(){
      if(this.y < 535){
        this.y++;
      }
      c.fillStyle = "green";
      c.fillRect(this.x, this.y, 30, 30);
      }  
  
     this.isTouching = function (platform) {
        return  (this.x < platform.x + platform.width)  &&
                (this.x + this.width > platform.x)  &&
                (this.y < platform.y + platform.height) &&
                (this.y + this.height > platform.y)
     }
  
  }



function drawWizz(){
    wizzards.forEach(wizz=>{
        wizz.draw();
  });
  }
  

  function createWizzard(){
    if(!(frames % 900 === 0)) return
    //for(i=0;i<7; i++){
        let wizz = new Wizzard();
        wizzards.push(wizz);
    //}
  }




function wizzMovement() { 
  
  wizz.y ++;

  if(wizz.x + wizz.width > 900){wizz.xs --} else { wizz.xs ++}  
  if(wizz.x < 0){ wizz.xs = 0} else { wizz.xs -= 1;}  

    //lateral movement
  wizz.x += wizz.xs;
  wizz.xs *= friction;
    
    //collition
  wizz.grounded = false;
    
  platforms.forEach(platform=>{
      var direction = collisionCheck(wizz, platform);
      if(direction == "bottom"){
        wizz.grounded = true;
      }     
  });

  if(wizz.grounded){
    wizz.ys = 0;
  }
}


function drawEnemies() { 

drawEnemie();
        drawEnemieTwo();
        drawEnemieThree();
        drawEnemieFour();
        drawEnemieFive();
        drawEnemieSix();
  
    }


function createEnemies() { 
createEnemie();
createEnemieTwo();
createEnemieThree();
createEnemieFour();
createEnemieFive();
createEnemieSix();
}





// profes



////////////////////////////////////////////ENEMIE 1  right BLUE
function Enemie(plataforma){
    //this.type = type
      this.plataforma = plataforma;
      this.spriteWidth = 726
      this.spriteheight = 86
      this.sprCols = 7
      this.sprRows = 1
      this.width = this.spriteWidth / this.sprCols
      this.height = this.spriteheight / this.sprRows
      this.y = 0;//(Math.random() * (c.canvas.width / 4)),
      this.x = (plataforma.x + plataforma.width >= c.canvas.width)?c.canvas.width-this.width:0+this.width/2;
      this.yFinal = plataforma.y-this.height;//landing[ri]
      this.xFinal = this.x
      this.number = 1
      this.xs = 1
      this.ys = 0
    //this.width = 20,
    //this.height = 20,
      this.gravity = 0.9
      this.grounded = false
  
      this.curFrame = 0;
  
      this.img = new Image() // lines added
      this.img.src = "./img/wizz_blue/b_wizz_jump_right2.png"
  
      this.drawInicial = function(){
  
          if(this.y == this.yFinal){
              this.grounded = true;
              return;
          }
          this.y++;
          if(this.y){
            this.ys ++;
          }
          c.drawImage(this.img, this.x, this.y, 62, 90);
      }
  
      this.draw = function(){
          this.img.src = "./img/wizz_blue/b_wizz_right_walkcopia.png";
          if(this.x < this.plataforma.x){
              this.xs = 1;
          }else if((this.x + this.width/2) > (this.plataforma.x + this.plataforma.width)){
              this.xs = -1;
          }
          this.x += this.xs;
  
          this.currFrame ++;
  
          c.drawImage(this.img, 0+(this.spriteWidth/7*this.curFrame), 0, 103, 86, this.x, this.y, this.width, this.height);
      }
  
  
  
  
  
      this.isTouching = function (platform) {
          return (this.x < platform.x + platform.width)  &&
                 (this.x + this.width > platform.x)  &&
                 (this.y < platform.y + platform.height) &&
                 (this.y + this.height > platform.y)
      }
      /* -----here starts function to copy-----*/
  
  }
  


  //my enemie

  ////////////////////////////////////////////ENEMIE 1  right BLUE
function Enemie(){
    //this.type = type,
    this.x = (Math.random() * (c.canvas.width / 4)),
    this.y = 0,
    this.yFinal = 440//landing[ri]
    this.xFinal = this.yFinal
    this.number = 1,
    this.xs = 0,
    this.ys = 0,
    //this.width = 20,
    //this.height = 20,
    this.gravity = 0.9,
    this.grounded = false
  
    this.spriteWidth = 726
    this.spriteheight = 86
    this.sprCols = 7
    this.sprRows = 1
    this.width = this.spriteWidth / this.sprCols
    this.height = this.spriteheight / this.sprRows
    this.curFrame = 0;
    
    this.img = new Image() // lines added
    this.img.src = "./img/wizz_blue/b_wizz_jump_right2.png"
   
    this.drawInicial = function(){
      if(this.y == this.yFinal)return;
      this.y++;
      if(this.y){
        this.ys ++;
      };
      c.drawImage(this.img, this.x, this.y, 62, 90);
      }  
  
    this.draw = function(){
      this.img.src = "./img/wizz_blue/b_wizz_right_walkcopia.png"
      this.x = 130
      this.x = this.x -1
      this.currFrame ++;
      //if(this.curFrame > this.sprCols){this.curFrame = 0} 
      //if(this.finalX > 900){this.finalX = 0} else if(this.this.finalX < 0){this.finalX--}
      //c.fillStyle = "black";
      //c.fillRect(this.x, this.y, 30, 30);
      c.drawImage(this.img, 0+(this.spriteWidth/7*this.curFrame), 0, 103, 86, this.x, this.y, this.width, this.height);       
      }  
    }
  
  
    
      
     this.isTouching = function (platform) {
      return (this.x < platform.x + platform.width)  &&
             (this.x + this.width > platform.x)  &&
             (this.y < platform.y + platform.height) &&
             (this.y + this.height > platform.y)
     }
      /* -----here starts function to copy-----*/ 
  
    
    

  /////// helpers

  /* -----Level setup-----*/ 

//Creating levels 

// var levelOne = platforms.filter(platform => platform.level == "one");
// var levelTwo = platforms.filter(platform => platform.level == "two");
// var levelThree = platforms.filter(platform => platform.level == "three");
// var levelFour = platforms.filter(platform => platform.level == "four");

// Drawing thelevels -  The wanted level must be passed as the function argument   

// function drawLevel(array){
//   c.fillStyle = "red";
//   array.forEach(arr =>{
//     c.fillRect(arr.x, arr.y, 20, 20)
//   });
// }
//Creating levels

// var levelOne = platforms.filter(platform => platform.level == "one");
// var levelTwo = platforms.filter(platform => platform.level == "two");
// var levelThree = platforms.filter(platform => platform.level == "three");
// var levelFour = platforms.filter(platform => platform.level == "four");

// Drawing thelevels -  The wanted level must be passed as the function argument

// function drawLevel(array){
//   c.fillStyle = "red";
//   array.forEach(arr =>{
//     c.fillRect(arr.x, arr.y, 20, 20)
//   });
// }
function drawPlatforms(){
    //c.fillStyle = "black";
    platforms.forEach(platform=>{
      c.fillRect(platform.x, platform.y, platform.width, 0);
    });
  }
  
  
  function clearCanvas(){
    c.clearRect(0, 0, 900, 600);
  }
  
  
  //////////////////////////////////////////////////* -----Player motion-----*/ 
  
  function playerMovement() { 
     
    //jump
      if(keys[32]){
        keys[32]=false;
        if(!player.jumping){
          player.ys = player.jumpStrength;
          player.jumping = true;
        }
      }
      //left & right
      if(keys[39]){
        keys[39]=false;
        if(player.x  + player.width > c.canvas.width){ player.xs = 0} else { player.xs += 1; }
        player.isWalkingTo = "right";
        player.action = 1
        if(player.mode != "start mode"){player.xs *= 2}
      }
      if(keys[37]){
        keys[37]=false;
        if(player.x < 0){ player.xs = 0} else { player.xs -= 1;}  
        player.isWalkingTo = "left";
        player.cation = 2 
        if(player.mode != "start mode"){player.xs *= 2}
      }
    
      if(keys[83]){
        keys[83]=false;
        createBullet();  
      }
  
      //jumping
      player.y += player.ys;
      player.ys += gravity;
  
      //lateral movement
      player.x += player.xs;
      player.xs *= friction;
      
      //collition
      player.grounded = false;
      
        platforms.forEach(platform=>{
        var direction = collisionCheck(player, platform);
        if(direction == "bottom"){
          player.jumping = false;
          player.grounded = true;
        }     
      });
  
      if(player.grounded){
        player.ys = 0;
      }
  }
  
    
  function collisionCheck(char, plat){
  
    // this is how the player would appear, if removing widht/2 the player appears in the middle of the lines
    
    var vectorX = (char.x + (char.width/2)) - (plat.x + (plat.width/2)); // player center x with platform center x borders
    var vectorY = (char.y + (char.height/2)) - (plat.y + (plat.height/2)); // player center y with platform center y borders
    
    var halfWidths = (char.width/2) + (plat.width/2); // middle center
    var halfHeights = (char.height/2) + (plat.height/2);
    
    var collisionDirection = null;
    
    //Offset  - the amount or distance the which player is out of line.
    //Vector - determining the position of one point in space relative to another by center
  
    if(Math.abs(vectorX) < halfWidths && Math.abs(vectorY) < halfHeights){
      var offsetX = halfWidths - Math.abs(vectorX); 
      var offsetY = halfHeights - Math.abs(vectorY);
      if(offsetX < offsetY){
        if(vectorX > 0){
          //collisionDirection = "right";
          char.x += offsetX;
        }else{
          //collisionDirection = "left";
          char.x -= offsetX;
        }
      }else{
        if(vectorY > 0){
          //collisionDirection = "top"
          //char.y += offsetY;
        }
          collisionDirection = "bottom";
          char.y -= offsetY;
        }
    }
    return collisionDirection;
    
  }
  
  
  ////////////////////////////////////////////////////////* -----Bullets-----*/ 
  
  function createBullet(){
    let bullet = new Bullet();
    bullets.push(bullet);
  }
  
  function drawBullet() { 
    //bullets.forEach( bullet =>{
    if(player.mode == "start mode" || player.mode == "red mode"){
    
            if(player.isWalkingTo == "right"){
                    bullets.forEach(bullet =>{
                    bullet.x += bullet.xs;
                    bullet.y += bullet.ys;
                    bullet.ys += bullet.gravity;
                    bullet.draw();  // bullet 1
                })   
                } else if (player.isWalkingTo == "left") {
    
                    bullets.forEach(bullet =>{
                    bullet.x -= bullet.xs;
                    bullet.y += bullet.ys;
                    bullet.ys += bullet.gravity;
                    bullet.draw();   // bullet 1
                })
            }
    } else if (player.mode == "blue mode"){
    
                if(player.isWalkingTo == "right"){
                    bullets.forEach(bullet =>{
                    bullet.x += bullet.xs;
                    bullet.y += bullet.ys;
                    bullet.ys += bullet.gravity;
                    bullet.draw(); // bullet 2
                })   
                } else if (player.isWalkingTo == "left") {
    
                    bullets.forEach(bullet =>{
                    bullet.x -= bullet.xs;
                    bullet.y += bullet.ys;
                    bullet.ys += bullet.gravity;
                    bullet.draw();// bullet 2
                })
                }
    } else if(player.mode == "green mode"){ 
                if(player.isWalkingTo == "right"){
    
                    bullets.forEach(bullet =>{
                    bullet.x += bullet.xs * 3.5;
                    bullet.y += bullet.ys * 1.5;
                    bullet.ys += bullet.gravity;
                    bullet.draw(); // bullet 2 range "large"
                })   
                } else if (player.isWalkingTo == "left") {
    
                    bullets.forEach(bullet =>{
                    bullet.x -= bullet.xs * 3.5;
                    bullet.y += bullet.ys * 1.5; 
                    bullet.ys += bullet.gravity;
                    bullet.draw();// bullet 2 range // large
                })
            }
        }
    //});
  }
  
  
  ////////////////////////////////////////////////////////* -----Enemies-----*/ 
  
  var landing = [];
  for(i=0; i<platforms.length; i++){
      let landy = platforms[i].y
      landing.push(landy);
  }
  var ri = Math.floor(Math.random() * landing.length);
  console.log(landing[ri]);
  
  /* -----ENEMIE ONE RIGHT-----*/ 
  
  function createEnemie(){
    if(!(frames % 300 === 0)) return
    //for(i=0;i<7; i++){
        let enemie = new Enemie();
        enemies.push(enemie);
    //}
  }
  function drawEnemie(){
    enemies.forEach(enemie=>{
      if(enemie.y == enemie.yFinal){
        enemie.draw()
      }else
        enemie.drawInicial();
  });
  }
  
  /* -----ENEMIE TWO LEFT-----*/// Review this line
  
  function createEnemieTwo(){
    if(!(frames % 300 === 0)) return
    //for(i=0;i<7; i++){
        let enemieTwo = new EnemieTwo();
        enemies.push(enemieTwo);
    //}
  }
  function drawEnemieTwo(){
    enemies.forEach(enemieTwo=>{
      if(enemieTwo.y == enemieTwo.yFinal){
        enemieTwo.draw()
      }else
        enemieTwo.drawInicial();
  });
  }
  
  
  /* -----ENEMIE THREE RIGHT-----*/ 
  
  function createEnemieThree(){
    if(!(frames % 300 === 0)) return
    //for(i=0;i<7; i++){
        let enemieThree = new EnemieThree();
        enemies.push(enemieThree);
    //}
  }
  function drawEnemieThree(){
    enemies.forEach(enemieThree=>{
      if(enemieThree.y == enemieThree.yFinal){
        enemieThree.draw()
      }else
        enemieThree.drawInicial();
  });
  }
  
  /* -----ENEMIE FOUR LEFT-----*/ 
  
  function createEnemieFour(){
    if(!(frames % 300 === 0)) return
    //for(i=0;i<7; i++){
        let enemieFour = new EnemieFour();
        enemies.push(enemieFour);
    //}
  }
  function drawEnemieFour(){
    enemies.forEach(enemieFour=>{
      if(enemieFour.y == enemieFour.yFinal){
        enemieFour.draw()
      }else
        enemieFour.drawInicial();
  });
  }
  
  /* -----ENEMIE FIVE RIGHT-----*/ 
  
  function createEnemieFive(){
    if(!(frames % 300 === 0)) return
    //for(i=0;i<7; i++){
        let enemieFive = new EnemieFive();
        enemies.push(enemieFive);
    //}
  }
  function drawEnemieFive(){
    enemies.forEach(enemieFive=>{
      if(enemieFive.y == enemieFive.yFinal){
        enemieFive.draw()
      }else
        enemieFive.drawInicial();
  });
  }
  
  /* -----ENEMIE SIX LEFT-----*/ 
  
  function createEnemieSix(){
    if(!(frames % 300 === 0)) return
    //for(i=0;i<7; i++){
        let enemieSix = new EnemieSix();
        enemies.push(enemieSix);
    //}
  }
  function drawEnemieSix(){
    enemies.forEach(enemieSix=>{
      if(enemieSix.y == enemieSix.yFinal){
        enemieSix.draw()
      }else
        enemieSix.drawInicial();
  });
  }
  
  /* -----Creating all enemies at once-----*/ 
  
  
  function drawEnemies() {
    drawEnemie();
            drawEnemieTwo();
            drawEnemieThree();
            drawEnemieFour();
            drawEnemieFive();
            drawEnemieSix();
      
        }  
    function createEnemies() { 
    createEnemie();
    createEnemieTwo();
    createEnemieThree();
    createEnemieFour();
    createEnemieFive();
    createEnemieSix();
    }
    
  
  
  /////////////////////////////////////////////////////
  //updating creatingenemie function (params) {
      
  
  ///this goes in helpers

  function createEnemie(){
    console.log("Dentro de creacion del mostro")
     if(!(frames % 100 === 0)) return
     for(i=0;i<7; i++){
       let enemie = new Enemie(i, platforms[i]);
       //enemie.createMonster();
       enemies.push(enemie)
     }
    }

    

    function drawEnemies() {
      enemies.forEach(enemie=>{
        if(enemie.grounded){
            enemie.draw()
        }else
            enemie.drawInicial();
        });
    }
        
    function createEnemies() {
        if(!(frames % 300 == 0)) return
        for(i=0;i<7; i++){
        enemies.push(new Enemie( enemies[i],platforms[i]));
        }
    }    




    // la del profe
    function drawEnemies() {
        //drawEnemie();
                // drawEnemieTwo();
                // drawEnemieThree();
                // drawEnemieFour();
                // drawEnemieFive();
                // drawEnemieSix();
          enemies.forEach(enemie=>{
              if(enemie.grounded){
                  enemie.draw()
              }else
                  enemie.drawInicial();
              });
            }
        function createEnemies() {
            if(!(frames % 300 == 0)) return
            //for(i=0;i<7; i++){
            enemies.push(new Enemie(platforms[5]));
            //}
        //createEnemie();
        // createEnemieTwo();
        // createEnemieThree();
        // createEnemieFour();
        // createEnemieFive();
        // createEnemieSix();
        }


function killWizzard(){
    enemies.forEach( bullet =>{
      if(enemie.isTouching(bullet)){
        enemie.ys --;
        console.log("touched")
      }
  
    })
  
  }
  
  function wizzKilled() {
    enemies.forEach(function (bullet) {
      if(enemie.isTouching(bullet)) gameOver()
    })
  }

  function gameOver() { 
      console.log("wizz killed!!!!")
   }








   
   function isTouching (a,b){
    return a.x < b.x + b.width-20 &&
           a.x + a.width-20 > b.x &&
           a.y < b.y + b.height-20 &&
           a.y + a.height-20 > b.y;

  }

  function checkColition(){
    balas.forEach(function(bala,bI){
      obstacles.forEach(function (vampiro,vI){
       if (isTouching(bala, vampiro)){
         console.log('muere vampiro')
        obstacles.splice(vI,1)
        balas.splice(bI,1)
         score++
       } });
    });



    obstacles.forEach(function(vampiro,vI){
      if (isTouching(vampiro,player)){
       obstacles.splice(vI,1)
       console.log ("me toco el vampiro")
       life--
      }
    })

    balas.forEach(function(bala,bI){
     obstaclesLobos.forEach(function (lobo,lI){
      if (isTouching(bala, lobo)){
        console.log('muere lobo')
         balas.splice(bI,1)
         obstaclesLobos.splice(lI,1)
         score++

      } });
   });
     obstaclesLobos.forEach(function(lobo,lI){
      if (isTouching(lobo,player)){
    console.log ("me toco el Lobo")
       obstaclesLobos.splice(lI,1)
       life--;
     }
 })
  }






function startGame(){
	gameStarted = true;
	clearCanvas();

	interval = setInterval(function(){
		clearCanvas();
		loop();
	}, 1000/60)
}


intro_screen();

function intro_screen(){
	c.font = "50px Impact";
	c.fillStyle = "#0099CC";
	c.textAlign = "center";
	c.fillText("Snow Bros vs Wizz", c.canvas.width/2, c.canvas.height/2);
  c.font = "20px Arial";
	c.fillText("Press Enter To Start", c.canvas.width/2, c.canvas.height/2 + 50);
}


//main js

window.onload = function(){
  function update() { 
      clearCanvas(); // update first call
      boardgame.draw() // 2nd call - goes directly to Boardgame class/constructor
      drawPlatforms(); // 3rd - from helpers, drawLevel
      player.drawImage(); // goes to this.action 
      drawBullet(); // goes to drawBullet which contains the bullet direction properties;
      playerMovement()
      drawEnemies();
      wizzardKiller()
      
  } 
  update(); // this is the first function it runs

   function startGame() { 
      createEnemie();
      interval = setInterval(update,1000/60)
  }
  intro_screen(); 
  startGame();
}





window.onload = function(){
  intro_screen(); 
}

function start(){
  function update() { 
      clearCanvas(); // update first call
      boardgame.draw() // 2nd call - goes directly to Boardgame class/constructor
      drawPlatforms(); // 3rd - from helpers, drawLevel
      player.drawImage(); // goes to this.action 
      drawBullet(); // goes to drawBullet which contains the bullet direction properties;
      playerMovement()
      drawEnemies();
      wizzardKiller()
      
  } 
  update(); // this is the first function it runs

   function startGame() { 
      createEnemie();
      interval = setInterval(update,1000/60)
  }
 
  startGame();
}
